{% extends "base.html" %}

{% block content %}

<h2 class="mb-3">Team Leave Requests</h2>

<div class="card shadow-sm">
    <div class="table-responsive">
        <table class="table table-hover mb-0 align-middle">
            <thead class="table-light">
                <tr>
                    <th>Employee</th>
                    <th>Dates</th>
                    <th>Days</th>
                    <th>Dept</th>
                    <th>Reason</th>
                    <th class="text-end">Action</th>
                </tr>
            </thead>

            <tbody>
                {% for r in pending %}
                    <tr>
                        <td class="fw-semibold">
                            {{ r.employee.full_name }}
                            ({{ r.employee.employee_id }})
                        </td>

                        <td>
                            {{ r.start_date }} → {{ r.end_date }}
                        </td>

                        <td>{{ r.days_requested }}</td>

                        <td>
                            {{ r.employee.department.name }}
                        </td>

                        <td class="text-muted">
                            {{ r.reason|default:"—" }}
                        </td>

                        <td class="text-end">
                            <form
                                method="post"
                                action="{% url 'approve_leave' r.id %}"
                                class="d-inline"
                            >
                                {% csrf_token %}
                                <button class="btn btn-sm btn-success">
                                    Approve
                                </button>
                            </form>

                            <form
                                method="post"
                                action="{% url 'reject_leave' r.id %}"
                                class="d-inline"
                            >
                                {% csrf_token %}
                                <button class="btn btn-sm btn-danger">
                                    Reject
                                </button>
                            </form>
                        </td>
                    </tr>
                {% empty %}
                    <tr>
                        <td
                            colspan="6"
                            class="text-center text-muted p-4"
                        >
                            No pending requests.
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

{% endblock %}
